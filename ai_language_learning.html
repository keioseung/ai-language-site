<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🤖 AI Language Learning Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(90deg, #2c3e50, #3498db, #2c3e50);
            color: white;
            text-align: center;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .language-selector {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem auto;
            max-width: 800px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .language-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .language-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: #fff;
        }

        .language-card.active {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border-color: #fff;
            box-shadow: 0 10px 25px rgba(39, 174, 96, 0.3);
        }

        .language-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .language-card .flag {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .progress-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .progress-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 4px solid #3498db;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
        }

        .content-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .lesson-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .lesson-card.completed {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .lesson-card.locked {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            cursor: not-allowed;
        }

        .lesson-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .lesson-card p {
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .lesson-status {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
        }

        .quiz-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            display: block !important; /* Force display for debugging */
        }

        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .question {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .options {
            display: grid;
            gap: 1rem;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .option:hover {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .option.correct {
            border-color: #27ae60;
            background: #d4edda;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #f8d7da;
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .vocabulary-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .vocab-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .vocab-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .vocab-term {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .vocab-translation {
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 0.5rem;
        }

        .vocab-definition {
            color: #34495e;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .vocab-example {
            color: #27ae60;
            font-size: 0.85rem;
            font-style: italic;
            background: rgba(39, 174, 96, 0.1);
            padding: 0.5rem;
            border-radius: 6px;
            margin-top: 0.5rem;
        }

        .stats-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .stat-card {
            text-align: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .language-grid {
                grid-template-columns: 1fr;
            }
            
            .lesson-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🤖 AI Language Learning Platform</h1>
        <p>Learn AI concepts while mastering multiple languages</p>
    </div>

    <div class="main-container">
        <!-- Language Selector -->
        <div class="language-selector">
            <h2>🌍 Choose Your Learning Language</h2>
            <div class="language-grid">
                <div class="language-card" onclick="selectLanguage('en')">
                    <div class="flag">🇺🇸</div>
                    <h3>English</h3>
                    <p>Learn AI in English</p>
                </div>
                <div class="language-card" onclick="selectLanguage('ko')">
                    <div class="flag">🇰🇷</div>
                    <h3>한국어</h3>
                    <p>AI를 한국어로 학습</p>
                </div>
                <div class="language-card" onclick="selectLanguage('zh')">
                    <div class="flag">🇨🇳</div>
                    <h3>中文</h3>
                    <p>用中文学习AI</p>
                </div>
                <div class="language-card" onclick="selectLanguage('ja')">
                    <div class="flag">🇯🇵</div>
                    <h3>日本語</h3>
                    <p>AIを日本語で学習</p>
                </div>
            </div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section" id="progressSection" style="display: none;">
            <h2>📊 Your Learning Progress</h2>
            <div class="progress-grid">
                <div class="progress-card">
                    <h3>AI Concepts</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="aiProgress" style="width: 0%"></div>
                    </div>
                    <p id="aiProgressText">0% Complete</p>
                </div>
                <div class="progress-card">
                    <h3>Language Skills</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="langProgress" style="width: 0%"></div>
                    </div>
                    <p id="langProgressText">0% Complete</p>
                </div>
                <div class="progress-card">
                    <h3>Quiz Score</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
                    </div>
                    <p id="quizProgressText">0% Average</p>
                </div>
            </div>
        </div>

        <!-- Content Section -->
        <div class="content-section" id="contentSection" style="display: none;">
            <h2>📚 AI Learning Modules</h2>
            <div class="lesson-grid" id="lessonGrid">
                <!-- Lessons will be populated by JavaScript -->
            </div>
        </div>

        <!-- Quiz Section -->
        <div class="quiz-section" id="quizSection" style="display: block;">
            <h2>🧠 Knowledge Check</h2>
            <div class="quiz-container" id="quizContainer">
                <p style="text-align: center; color: #7f8c8d;">언어를 선택하면 퀴즈가 표시됩니다.</p>
            </div>
        </div>

        <!-- Vocabulary Section -->
        <div class="vocabulary-section" id="vocabularySection" style="display: none;">
            <h2>📖 AI Vocabulary</h2>
            <div class="vocab-grid" id="vocabGrid">
                <!-- Vocabulary will be populated by JavaScript -->
            </div>
        </div>

        <!-- Statistics Section -->
        <div class="stats-section" id="statsSection" style="display: none;">
            <h2>📈 Learning Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="lessonsCompleted">0</div>
                    <div class="stat-label">Lessons Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="wordsLearned">0</div>
                    <div class="stat-label">Words Learned</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="quizScore">0%</div>
                    <div class="stat-label">Average Quiz Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="studyTime">0h</div>
                    <div class="stat-label">Study Time</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lesson Modal -->
    <div id="lessonModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLessonModal()">&times;</span>
            <div id="lessonContent"></div>
        </div>
    </div>

    <script>
        // Global variables
        let currentLanguage = 'en';
        let userProgress = {
            lessonsCompleted: 0,
            wordsLearned: 0,
            quizScores: [],
            studyTime: 0,
            completedLessons: []
        };

        // Load content from admin panel
        function loadAdminContent() {
            const adminLessons = JSON.parse(localStorage.getItem('adminLessons') || '[]');
            const adminVocabulary = JSON.parse(localStorage.getItem('adminVocabulary') || '[]');
            const adminQuizzes = JSON.parse(localStorage.getItem('adminQuizzes') || '[]');
            
            console.log('Raw admin data:', { adminLessons, adminVocabulary, adminQuizzes });
            
            // Get admin content for current language
            const adminLessonsForLang = adminLessons.filter(lesson => lesson.language === currentLanguage);
            const adminVocabularyForLang = adminVocabulary.filter(vocab => vocab.language === currentLanguage);
            const adminQuizzesForLang = adminQuizzes.filter(quiz => quiz.language === currentLanguage);
            
            console.log(`Filtered admin content for ${currentLanguage}:`, {
                lessons: adminLessonsForLang,
                vocabulary: adminVocabularyForLang,
                quizzes: adminQuizzesForLang
            });
            
            // Merge admin lessons with default lessons (don't overwrite, append)
            if (adminLessonsForLang.length > 0) {
                // Create a map of existing lesson IDs to avoid duplicates
                const existingLessonIds = new Set(content[currentLanguage].lessons.map(lesson => lesson.id));
                
                adminLessonsForLang.forEach(adminLesson => {
                    if (!existingLessonIds.has(adminLesson.id)) {
                        content[currentLanguage].lessons.push(adminLesson);
                    }
                });
            }
            
            // Add admin vocabulary to lessons
            adminVocabularyForLang.forEach(vocab => {
                // Find the lesson this vocabulary belongs to
                const lesson = content[currentLanguage].lessons.find(l => l.id === vocab.lessonId);
                if (lesson) {
                    if (!lesson.vocabulary) lesson.vocabulary = [];
                    lesson.vocabulary.push(vocab);
                }
            });
            
            // IMPORTANT: Replace quizzes with admin quizzes if they exist
            if (adminQuizzesForLang.length > 0) {
                console.log(`Replacing quizzes with ${adminQuizzesForLang.length} admin quizzes for ${currentLanguage}`);
                content[currentLanguage].quizzes = adminQuizzesForLang;
            } else {
                console.log(`No admin quizzes found for ${currentLanguage}, keeping default quizzes`);
            }
            
            console.log(`Final content for ${currentLanguage}:`, {
                lessons: content[currentLanguage].lessons.length,
                quizzes: content[currentLanguage].quizzes.length,
                quizDetails: content[currentLanguage].quizzes
            });
        }

        // Language-specific content
        const content = {
            en: {
                lessons: [
                    {
                        id: 1,
                        title: "What is Artificial Intelligence?",
                        description: "Learn the basics of AI and its applications",
                        content: `
                            <h2>What is Artificial Intelligence?</h2>
                            <p>Artificial Intelligence (AI) is a branch of computer science that aims to create machines capable of performing tasks that typically require human intelligence.</p>
                            
                            <h3>Key Concepts:</h3>
                            <ul>
                                <li><strong>Machine Learning:</strong> A subset of AI that enables computers to learn without being explicitly programmed</li>
                                <li><strong>Deep Learning:</strong> A type of machine learning based on artificial neural networks</li>
                                <li><strong>Natural Language Processing:</strong> The ability of computers to understand and process human language</li>
                                <li><strong>Computer Vision:</strong> The field of AI that enables computers to interpret visual information</li>
                            </ul>
                            
                            <h3>Applications:</h3>
                            <ul>
                                <li>Virtual assistants (Siri, Alexa)</li>
                                <li>Recommendation systems (Netflix, Amazon)</li>
                                <li>Autonomous vehicles</li>
                                <li>Medical diagnosis</li>
                                <li>Financial trading</li>
                            </ul>
                        `,
                        vocabulary: [
                            { term: "Artificial Intelligence", translation: "인공지능 / 人工智能 / 人工知能" },
                            { term: "Machine Learning", translation: "기계학습 / 机器学习 / 機械学習" },
                            { term: "Neural Network", translation: "신경망 / 神经网络 / ニューラルネットワーク" },
                            { term: "Algorithm", translation: "알고리즘 / 算法 / アルゴリズム" }
                        ]
                    },
                    {
                        id: 2,
                        title: "Machine Learning Fundamentals",
                        description: "Understanding how machines learn from data",
                        content: `
                            <h2>Machine Learning Fundamentals</h2>
                            <p>Machine Learning is a method of data analysis that automates analytical model building. It is based on the idea that systems can learn from data, identify patterns, and make decisions with minimal human intervention.</p>
                            
                            <h3>Types of Machine Learning:</h3>
                            <ul>
                                <li><strong>Supervised Learning:</strong> Learning from labeled training data</li>
                                <li><strong>Unsupervised Learning:</strong> Finding hidden patterns in unlabeled data</li>
                                <li><strong>Reinforcement Learning:</strong> Learning through interaction with an environment</li>
                            </ul>
                            
                            <h3>Common Algorithms:</h3>
                            <ul>
                                <li>Linear Regression</li>
                                <li>Decision Trees</li>
                                <li>Random Forest</li>
                                <li>Support Vector Machines</li>
                                <li>K-Means Clustering</li>
                            </ul>
                        `,
                        vocabulary: [
                            { term: "Supervised Learning", translation: "지도학습 / 监督学习 / 教師あり学習" },
                            { term: "Unsupervised Learning", translation: "비지도학습 / 无监督学习 / 教師なし学習" },
                            { term: "Training Data", translation: "훈련 데이터 / 训练数据 / 訓練データ" },
                            { term: "Model", translation: "모델 / 模型 / モデル" }
                        ]
                    },
                    {
                        id: 3,
                        title: "Deep Learning and Neural Networks",
                        description: "Exploring the power of deep neural networks",
                        content: `
                            <h2>Deep Learning and Neural Networks</h2>
                            <p>Deep Learning is a subset of machine learning that uses artificial neural networks with multiple layers to model and understand complex patterns in data.</p>
                            
                            <h3>Neural Network Architecture:</h3>
                            <ul>
                                <li><strong>Input Layer:</strong> Receives the initial data</li>
                                <li><strong>Hidden Layers:</strong> Process the data through multiple transformations</li>
                                <li><strong>Output Layer:</strong> Produces the final result</li>
                            </ul>
                            
                            <h3>Popular Deep Learning Frameworks:</h3>
                            <ul>
                                <li>TensorFlow (Google)</li>
                                <li>PyTorch (Facebook)</li>
                                <li>Keras (High-level API)</li>
                                <li>Scikit-learn (Traditional ML)</li>
                            </ul>
                            
                            <h3>Applications:</h3>
                            <ul>
                                <li>Image Recognition</li>
                                <li>Speech Recognition</li>
                                <li>Natural Language Processing</li>
                                <li>Autonomous Driving</li>
                            </ul>
                        `,
                        vocabulary: [
                            { term: "Deep Learning", translation: "딥러닝 / 深度学习 / ディープラーニング" },
                            { term: "Neural Network", translation: "신경망 / 神经网络 / ニューラルネットワーク" },
                            { term: "Layer", translation: "층 / 层 / レイヤー" },
                            { term: "Activation Function", translation: "활성화 함수 / 激活函数 / 活性化関数" }
                        ]
                    }
                ],
                quizzes: [
                    {
                        question: "What is the main goal of Artificial Intelligence?",
                        options: [
                            "To replace all human workers",
                            "To create machines that can perform tasks requiring human intelligence",
                            "To make computers faster",
                            "To reduce electricity consumption"
                        ],
                        correct: 1
                    },
                    {
                        question: "Which type of machine learning uses labeled training data?",
                        options: [
                            "Unsupervised Learning",
                            "Supervised Learning",
                            "Reinforcement Learning",
                            "Deep Learning"
                        ],
                        correct: 1
                    },
                    {
                        question: "What is the primary advantage of deep learning?",
                        options: [
                            "It requires less data",
                            "It can automatically learn features from raw data",
                            "It's faster than traditional machine learning",
                            "It doesn't need a computer"
                        ],
                        correct: 1
                    }
                ]
            },
            ko: {
                lessons: [
                    {
                        id: 1,
                        title: "인공지능이란 무엇인가?",
                        description: "AI의 기본 개념과 응용 분야를 학습합니다",
                        content: `
                            <h2>인공지능이란 무엇인가?</h2>
                            <p>인공지능(AI)은 인간의 지능이 필요한 작업을 수행할 수 있는 기계를 만들려는 컴퓨터 과학의 한 분야입니다.</p>
                            
                            <h3>핵심 개념:</h3>
                            <ul>
                                <li><strong>머신러닝:</strong> 컴퓨터가 명시적으로 프로그래밍되지 않고도 학습할 수 있게 하는 AI의 하위 분야</li>
                                <li><strong>딥러닝:</strong> 인공 신경망을 기반으로 한 머신러닝의 한 유형</li>
                                <li><strong>자연어 처리:</strong> 컴퓨터가 인간의 언어를 이해하고 처리하는 능력</li>
                                <li><strong>컴퓨터 비전:</strong> 컴퓨터가 시각적 정보를 해석할 수 있게 하는 AI 분야</li>
                            </ul>
                            
                            <h3>응용 분야:</h3>
                            <ul>
                                <li>가상 비서 (시리, 알렉사)</li>
                                <li>추천 시스템 (넷플릭스, 아마존)</li>
                                <li>자율주행차</li>
                                <li>의료 진단</li>
                                <li>금융 거래</li>
                            </ul>
                        `,
                        vocabulary: [
                            { term: "인공지능", translation: "Artificial Intelligence / 人工智能 / 人工知能" },
                            { term: "머신러닝", translation: "Machine Learning / 机器学习 / 機械学習" },
                            { term: "신경망", translation: "Neural Network / 神经网络 / ニューラルネットワーク" },
                            { term: "알고리즘", translation: "Algorithm / 算法 / アルゴリズム" }
                        ]
                    },
                    {
                        id: 2,
                        title: "머신러닝 기초",
                        description: "기계가 데이터로부터 어떻게 학습하는지 이해하기",
                        content: `
                            <h2>머신러닝 기초</h2>
                            <p>머신러닝은 분석적 모델 구축을 자동화하는 데이터 분석 방법입니다. 시스템이 데이터로부터 학습하고, 패턴을 식별하며, 최소한의 인간 개입으로 결정을 내릴 수 있다는 아이디어를 기반으로 합니다.</p>
                            
                            <h3>머신러닝의 유형:</h3>
                            <ul>
                                <li><strong>지도학습:</strong> 라벨이 있는 훈련 데이터로부터 학습</li>
                                <li><strong>비지도학습:</strong> 라벨이 없는 데이터에서 숨겨진 패턴 찾기</li>
                                <li><strong>강화학습:</strong> 환경과의 상호작용을 통한 학습</li>
                            </ul>
                            
                            <h3>일반적인 알고리즘:</h3>
                            <ul>
                                <li>선형 회귀</li>
                                <li>결정 트리</li>
                                <li>랜덤 포레스트</li>
                                <li>서포트 벡터 머신</li>
                                <li>K-평균 클러스터링</li>
                            </ul>
                        `,
                        vocabulary: [
                            { term: "지도학습", translation: "Supervised Learning / 监督学习 / 教師あり学習" },
                            { term: "비지도학습", translation: "Unsupervised Learning / 无监督学习 / 教師なし学習" },
                            { term: "훈련 데이터", translation: "Training Data / 训练数据 / 訓練データ" },
                            { term: "모델", translation: "Model / 模型 / モデル" }
                        ]
                    }
                ],
                quizzes: [
                    {
                        question: "인공지능의 주요 목표는 무엇인가요?",
                        options: [
                            "모든 인간 노동자를 대체하는 것",
                            "인간의 지능이 필요한 작업을 수행할 수 있는 기계를 만드는 것",
                            "컴퓨터를 더 빠르게 만드는 것",
                            "전기 소비를 줄이는 것"
                        ],
                        correct: 1
                    },
                    {
                        question: "어떤 유형의 머신러닝이 라벨이 있는 훈련 데이터를 사용하나요?",
                        options: [
                            "비지도학습",
                            "지도학습",
                            "강화학습",
                            "딥러닝"
                        ],
                        correct: 1
                    }
                ]
            },
            zh: {
                lessons: [
                    {
                        id: 1,
                        title: "什么是人工智能？",
                        description: "学习AI的基本概念和应用领域",
                        content: `
                            <h2>什么是人工智能？</h2>
                            <p>人工智能（AI）是计算机科学的一个分支，旨在创建能够执行通常需要人类智能的任务的机器。</p>
                            
                            <h3>核心概念：</h3>
                            <ul>
                                <li><strong>机器学习：</strong>AI的一个子集，使计算机能够在没有明确编程的情况下学习</li>
                                <li><strong>深度学习：</strong>基于人工神经网络的机器学习类型</li>
                                <li><strong>自然语言处理：</strong>计算机理解和处理人类语言的能力</li>
                                <li><strong>计算机视觉：</strong>使计算机能够解释视觉信息的AI领域</li>
                            </ul>
                            
                            <h3>应用领域：</h3>
                            <ul>
                                <li>虚拟助手（Siri、Alexa）</li>
                                <li>推荐系统（Netflix、Amazon）</li>
                                <li>自动驾驶汽车</li>
                                <li>医疗诊断</li>
                                <li>金融交易</li>
                            </ul>
                        `,
                        vocabulary: [
                            { term: "人工智能", translation: "Artificial Intelligence / 인공지능 / 人工知能" },
                            { term: "机器学习", translation: "Machine Learning / 머신러닝 / 機械学習" },
                            { term: "神经网络", translation: "Neural Network / 신경망 / ニューラルネットワーク" },
                            { term: "算法", translation: "Algorithm / 알고리즘 / アルゴリズム" }
                        ]
                    }
                ],
                quizzes: [
                    {
                        question: "人工智能的主要目标是什么？",
                        options: [
                            "取代所有人类工人",
                            "创造能够执行需要人类智能的任务的机器",
                            "让计算机更快",
                            "减少电力消耗"
                        ],
                        correct: 1
                    }
                ]
            },
            ja: {
                lessons: [
                    {
                        id: 1,
                        title: "人工知能とは何か？",
                        description: "AIの基本概念と応用分野を学習",
                        content: `
                            <h2>人工知能とは何か？</h2>
                            <p>人工知能（AI）は、通常人間の知能を必要とするタスクを実行できる機械を作成することを目的としたコンピュータサイエンスの一分野です。</p>
                            
                            <h3>核心概念：</h3>
                            <ul>
                                <li><strong>機械学習：</strong>コンピュータが明示的にプログラミングされなくても学習できるようにするAIのサブセット</li>
                                <li><strong>ディープラーニング：</strong>人工ニューラルネットワークに基づく機械学習のタイプ</li>
                                <li><strong>自然言語処理：</strong>コンピュータが人間の言語を理解し処理する能力</li>
                                <li><strong>コンピュータビジョン：</strong>コンピュータが視覚情報を解釈できるようにするAI分野</li>
                            </ul>
                            
                            <h3>応用分野：</h3>
                            <ul>
                                <li>仮想アシスタント（Siri、Alexa）</li>
                                <li>推薦システム（Netflix、Amazon）</li>
                                <li>自動運転車</li>
                                <li>医療診断</li>
                                <li>金融取引</li>
                            </ul>
                        `,
                        vocabulary: [
                            { term: "人工知能", translation: "Artificial Intelligence / 인공지능 / 人工智能" },
                            { term: "機械学習", translation: "Machine Learning / 머신러닝 / 机器学习" },
                            { term: "ニューラルネットワーク", translation: "Neural Network / 신경망 / 神经网络" },
                            { term: "アルゴリズム", translation: "Algorithm / 알고리즘 / 算法" }
                        ]
                    }
                ],
                quizzes: [
                    {
                        question: "人工知能の主な目標は何ですか？",
                        options: [
                            "すべての人間労働者を置き換えること",
                            "人間の知能を必要とするタスクを実行できる機械を作成すること",
                            "コンピュータをより速くすること",
                            "電力消費を減らすこと"
                        ],
                        correct: 1
                    }
                ]
            }
        };

        // Language selection
        function selectLanguage(lang) {
            currentLanguage = lang;
            console.log(`Selected language: ${currentLanguage}`);
            
            // Update active language card
            document.querySelectorAll('.language-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.language-card').classList.add('active');
            
            // Load admin content for selected language
            loadAdminContent();
            
            // Show content sections
            document.getElementById('progressSection').style.display = 'block';
            document.getElementById('contentSection').style.display = 'block';
            document.getElementById('quizSection').style.display = 'block';
            document.getElementById('vocabularySection').style.display = 'block';
            document.getElementById('statsSection').style.display = 'block';
            
            // Debug: Check if quiz section is visible
            const quizSection = document.getElementById('quizSection');
            console.log('Quiz section display style:', quizSection.style.display);
            console.log('Quiz section element:', quizSection);
            
            // Load content
            loadLessons();
            loadVocabulary();
            loadQuizzes();
            updateProgress();
            updateStats();
            
            console.log(`Content loaded for ${currentLanguage}:`, {
                lessons: content[currentLanguage].lessons.length,
                quizzes: content[currentLanguage].quizzes.length
            });
        }

        // Load lessons
        function loadLessons() {
            const lessonGrid = document.getElementById('lessonGrid');
            lessonGrid.innerHTML = '';
            
            const lessons = content[currentLanguage].lessons;
            
            lessons.forEach((lesson, index) => {
                const isCompleted = userProgress.completedLessons.includes(lesson.id);
                const isLocked = index > 0 && !userProgress.completedLessons.includes(lessons[index - 1].id);
                
                const lessonCard = document.createElement('div');
                lessonCard.className = `lesson-card ${isCompleted ? 'completed' : ''} ${isLocked ? 'locked' : ''}`;
                lessonCard.onclick = isLocked ? null : () => openLesson(lesson);
                
                lessonCard.innerHTML = `
                    <div class="lesson-status">
                        ${isCompleted ? '✅' : isLocked ? '🔒' : '📖'}
                    </div>
                    <h3>${lesson.title}</h3>
                    <p>${lesson.description}</p>
                `;
                
                lessonGrid.appendChild(lessonCard);
            });
        }

        // Open lesson modal
        function openLesson(lesson) {
            const modal = document.getElementById('lessonModal');
            const content = document.getElementById('lessonContent');
            
            content.innerHTML = lesson.content;
            modal.style.display = 'block';
            
            // Mark as completed
            if (!userProgress.completedLessons.includes(lesson.id)) {
                userProgress.completedLessons.push(lesson.id);
                userProgress.lessonsCompleted++;
                userProgress.wordsLearned += lesson.vocabulary.length;
                userProgress.studyTime += 15; // 15 minutes per lesson
                
                updateProgress();
                updateStats();
                loadLessons();
            }
        }

        // Close lesson modal
        function closeLessonModal() {
            document.getElementById('lessonModal').style.display = 'none';
        }

        // Load vocabulary
        function loadVocabulary() {
            const vocabGrid = document.getElementById('vocabGrid');
            vocabGrid.innerHTML = '';
            
            const lessons = content[currentLanguage].lessons;
            const allVocabulary = [];
            
            // Collect vocabulary from all lessons
            lessons.forEach(lesson => {
                if (lesson.vocabulary && lesson.vocabulary.length > 0) {
                    allVocabulary.push(...lesson.vocabulary);
                }
            });
            
            // Also load standalone vocabulary from admin
            const adminVocabulary = JSON.parse(localStorage.getItem('adminVocabulary') || '[]');
            const adminVocabularyForLang = adminVocabulary.filter(vocab => 
                vocab.language === currentLanguage && !vocab.lessonId
            );
            allVocabulary.push(...adminVocabularyForLang);
            
            if (allVocabulary.length === 0) {
                vocabGrid.innerHTML = '<p style="text-align: center; color: #7f8c8d; grid-column: 1 / -1;">아직 어휘가 없습니다. 관리자 페이지에서 어휘를 추가해주세요.</p>';
                return;
            }
            
            allVocabulary.forEach(vocab => {
                const vocabCard = document.createElement('div');
                vocabCard.className = 'vocab-card';
                vocabCard.innerHTML = `
                    <div class="vocab-term">${vocab.term}</div>
                    <div class="vocab-translation">${vocab.translation}</div>
                    ${vocab.definition ? `<div class="vocab-definition">${vocab.definition}</div>` : ''}
                    ${vocab.example ? `<div class="vocab-example">예문: ${vocab.example}</div>` : ''}
                `;
                vocabGrid.appendChild(vocabCard);
            });
            
            console.log(`Loaded ${allVocabulary.length} vocabulary items for ${currentLanguage}`);
        }

        // Load quizzes
        function loadQuizzes() {
            const quizContainer = document.getElementById('quizContainer');
            quizContainer.innerHTML = '';
            
            const quizzes = content[currentLanguage].quizzes;
            console.log(`Loading ${quizzes.length} quizzes for ${currentLanguage}:`, quizzes);
            
            if (quizzes.length === 0) {
                quizContainer.innerHTML = '<p style="text-align: center; color: #7f8c8d;">아직 퀴즈가 없습니다. 관리자 페이지에서 퀴즈를 추가해주세요.</p>';
                console.log('No quizzes found, showing empty message');
                return;
            }
            
            console.log('About to show first quiz:', quizzes[0]);
            
            // Create quiz navigation first
            const quizNav = document.createElement('div');
            quizNav.style.textAlign = 'center';
            quizNav.style.marginTop = '2rem';
            quizNav.id = 'quizNavigation';
            
            quizzes.forEach((quiz, index) => {
                const quizBtn = document.createElement('button');
                quizBtn.className = 'btn';
                quizBtn.textContent = `퀴즈 ${index + 1}`;
                quizBtn.onclick = () => {
                    console.log(`Quiz button ${index + 1} clicked`);
                    showQuiz(index);
                    // Update active button
                    document.querySelectorAll('#quizNavigation .btn').forEach(btn => {
                        btn.style.background = 'linear-gradient(135deg, #3498db, #2980b9)';
                    });
                    quizBtn.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
                };
                quizNav.appendChild(quizBtn);
            });
            
            // Add navigation to container
            quizContainer.appendChild(quizNav);
            
            // Show first quiz by default
            showQuiz(0);
            
            // Highlight first button
            if (quizNav.children.length > 0) {
                quizNav.children[0].style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';
            }
        }

        // Show specific quiz
        function showQuiz(quizIndex) {
            const quizContainer = document.getElementById('quizContainer');
            const quizzes = content[currentLanguage].quizzes;
            
            console.log(`Showing quiz ${quizIndex} of ${quizzes.length} quizzes`);
            
            if (quizIndex >= quizzes.length) {
                console.log('Quiz index out of range');
                return;
            }
            
            const quiz = quizzes[quizIndex];
            console.log('Quiz to show:', quiz);
            
            let quizHTML = `
                <div class="question">
                    <h3>${quiz.question}</h3>
                </div>
                <div class="options">
            `;
            
            quiz.options.forEach((option, index) => {
                quizHTML += `
                    <div class="option" onclick="selectAnswer(${quizIndex}, ${index})">
                        ${option}
                    </div>
                `;
            });
            
            quizHTML += `
                </div>
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn" onclick="checkAnswer(${quizIndex})" id="checkBtn" disabled>정답 확인</button>
                </div>
                <div id="quizResult" style="margin-top: 1rem; text-align: center;"></div>
            `;
            
            // Save the navigation
            const quizNav = document.getElementById('quizNavigation');
            
            // Clear the container but preserve navigation
            quizContainer.innerHTML = '';
            
            // Add the new quiz content
            quizContainer.innerHTML = quizHTML;
            
            // Restore the navigation
            if (quizNav) {
                quizContainer.appendChild(quizNav);
            }
            
            console.log('Quiz HTML inserted successfully with navigation preserved');
        }

        // Select answer
        function selectAnswer(quizIndex, optionIndex) {
            // Remove previous selection
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Select current option
            event.target.classList.add('selected');
            
            // Enable check button
            document.getElementById('checkBtn').disabled = false;
            
            // Store selected answer
            window.selectedAnswer = optionIndex;
        }

        // Check answer
        function checkAnswer(quizIndex) {
            const quiz = content[currentLanguage].quizzes[quizIndex];
            const selectedAnswer = window.selectedAnswer;
            const resultDiv = document.getElementById('quizResult');
            
            if (selectedAnswer === undefined) {
                resultDiv.innerHTML = '<p style="color: #e74c3c;">답을 선택해주세요!</p>';
                return;
            }
            
            const isCorrect = selectedAnswer === quiz.correctAnswer;
            const score = isCorrect ? 100 : 0;
            
            // Add to user progress
            userProgress.quizScores.push(score);
            
            // Show result
            if (isCorrect) {
                resultDiv.innerHTML = `
                    <div style="color: #27ae60; font-weight: bold; font-size: 1.2rem;">
                        ✅ 정답입니다! (점수: ${score}점)
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div style="color: #e74c3c; font-weight: bold; font-size: 1.2rem;">
                        ❌ 틀렸습니다. 정답: ${quiz.options[quiz.correctAnswer]}
                    </div>
                `;
            }
            
            // Update progress
            updateProgress();
            updateStats();
            
            // Disable check button
            document.getElementById('checkBtn').disabled = true;
        }

        // Update progress
        function updateProgress() {
            const totalLessons = content[currentLanguage].lessons.length;
            const aiProgress = (userProgress.lessonsCompleted / totalLessons) * 100;
            const langProgress = Math.min(aiProgress + 20, 100); // Language progress based on AI progress
            const quizProgress = userProgress.quizScores.length > 0 ? 
                userProgress.quizScores.reduce((a, b) => a + b, 0) / userProgress.quizScores.length : 0;
            
            document.getElementById('aiProgress').style.width = aiProgress + '%';
            document.getElementById('langProgress').style.width = langProgress + '%';
            document.getElementById('quizProgress').style.width = quizProgress + '%';
            
            document.getElementById('aiProgressText').textContent = Math.round(aiProgress) + '% Complete';
            document.getElementById('langProgressText').textContent = Math.round(langProgress) + '% Complete';
            document.getElementById('quizProgressText').textContent = Math.round(quizProgress) + '% Average';
        }

        // Update statistics
        function updateStats() {
            document.getElementById('lessonsCompleted').textContent = userProgress.lessonsCompleted;
            document.getElementById('wordsLearned').textContent = userProgress.wordsLearned;
            document.getElementById('quizScore').textContent = userProgress.quizScores.length > 0 ? 
                Math.round(userProgress.quizScores.reduce((a, b) => a + b, 0) / userProgress.quizScores.length) + '%' : '0%';
            document.getElementById('studyTime').textContent = Math.floor(userProgress.studyTime / 60) + 'h ' + (userProgress.studyTime % 60) + 'm';
        }

        // Initialize the application
        window.onload = function() {
            // Load saved progress from localStorage
            const savedProgress = localStorage.getItem('aiLanguageProgress');
            if (savedProgress) {
                userProgress = JSON.parse(savedProgress);
            }
            
            // Debug: Check admin data on load
            console.log('=== DEBUG: Checking admin data on page load ===');
            console.log('Admin Lessons:', JSON.parse(localStorage.getItem('adminLessons') || '[]'));
            console.log('Admin Vocabulary:', JSON.parse(localStorage.getItem('adminVocabulary') || '[]'));
            console.log('Admin Quizzes:', JSON.parse(localStorage.getItem('adminQuizzes') || '[]'));
            console.log('=== END DEBUG ===');
            
            // Set default language
            selectLanguage('en');
        };

        // Save progress to localStorage
        function saveProgress() {
            localStorage.setItem('aiLanguageProgress', JSON.stringify(userProgress));
        }

        // Auto-save progress every 30 seconds
        setInterval(saveProgress, 30000);

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('lessonModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html> 